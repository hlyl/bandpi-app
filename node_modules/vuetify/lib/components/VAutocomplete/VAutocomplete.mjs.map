{"version":3,"file":"VAutocomplete.mjs","names":["makeSelectProps","VChip","VDefaultsProvider","VList","VListItem","VMenu","VTextField","makeFilterProps","useFilter","makeTransitionProps","useItems","useForwardRef","useLocale","useProxiedModel","computed","nextTick","ref","watch","genericComponent","useRender","wrapInArray","highlightResult","text","matches","length","Array","isArray","Error","substr","VAutocomplete","name","props","search","String","filterKeys","transition","emits","e","val","setup","slots","t","vTextFieldRef","activator","isFocused","isPristine","menu","items","transformIn","transformOut","model","v","transformed","multiple","filteredItems","value","undefined","selections","map","find","item","selected","selection","onClear","openOnClear","onClickControl","hideNoData","onKeydown","includes","key","onInput","target","onAfterLeave","isSelecting","select","index","findIndex","splice","title","$el","querySelector","at","hasChips","chips","chip","menuIcon","default","eager","noDataText","preventDefault","onChipClose","stopPropagation","slotProps","modelValue","closable","closableChips","size","originalItem"],"sources":["../../../src/components/VAutocomplete/VAutocomplete.tsx"],"sourcesContent":["// Styles\nimport './VAutocomplete.sass'\n\n// Components\nimport { makeSelectProps } from '@/components/VSelect/VSelect'\nimport { VChip } from '@/components/VChip'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VList, VListItem } from '@/components/VList'\nimport { VMenu } from '@/components/VMenu'\nimport { VTextField } from '@/components/VTextField'\n\n// Composables\nimport { makeFilterProps, useFilter } from '@/composables/filter'\nimport { makeTransitionProps } from '@/composables/transition'\nimport { useItems } from '@/composables/items'\nimport { useForwardRef } from '@/composables/forwardRef'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utility\nimport { computed, nextTick, ref, watch } from 'vue'\nimport { genericComponent, useRender, wrapInArray } from '@/util'\n\n// Types\nimport type { FilterMatch } from '@/composables/filter'\nimport type { DefaultChipSlot } from '@/components/VSelect/VSelect'\nimport type { MakeSlots } from '@/util'\n\nfunction highlightResult (text: string, matches: FilterMatch, length: number) {\n  if (Array.isArray(matches)) throw new Error('Multiple matches is not implemented')\n\n  return typeof matches === 'number' && ~matches\n    ? (\n      <>\n        <span class=\"v-autocomplete__unmask\">{ text.substr(0, matches) }</span>\n        <span class=\"v-autocomplete__mask\">{ text.substr(matches, length) }</span>\n        <span class=\"v-autocomplete__unmask\">{ text.substr(matches + length) }</span>\n      </>\n    )\n    : text\n}\n\nexport const VAutocomplete = genericComponent<new <T>() => {\n  $slots: MakeSlots<{\n    chip: [DefaultChipSlot]\n    default: []\n    selection: [{ item: T }]\n  }>\n}>()({\n  name: 'VAutocomplete',\n\n  props: {\n    // TODO: implement post keyboard support\n    // autoSelectFirst: Boolean,\n    search: String,\n\n    ...makeFilterProps({ filterKeys: ['title'] }),\n    ...makeSelectProps(),\n    ...makeTransitionProps({ transition: false }),\n  },\n\n  emits: {\n    'click:clear': (e: MouseEvent) => true,\n    'update:search': (val: any) => true,\n    'update:modelValue': (val: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const { t } = useLocale()\n    const vTextFieldRef = ref()\n    const activator = ref()\n    const isFocused = ref(false)\n    const isPristine = ref(true)\n    const menu = ref(false)\n    const { items, transformIn, transformOut } = useItems(props)\n    const search = useProxiedModel(props, 'search', '')\n    const model = useProxiedModel(\n      props,\n      'modelValue',\n      [],\n      v => transformIn(wrapInArray(v)),\n      v => {\n        const transformed = transformOut(v)\n        return props.multiple ? transformed : transformed[0]\n      }\n    )\n    const { filteredItems } = useFilter(props, items, computed(() => isPristine.value ? undefined : search.value))\n    const selections = computed(() => {\n      return model.value.map(v => {\n        return items.value.find(item => item.value === v.value) || v\n      })\n    })\n    const selected = computed(() => selections.value.map(selection => selection.props.value))\n\n    function onClear (e: MouseEvent) {\n      model.value = []\n\n      if (props.openOnClear) {\n        menu.value = true\n      }\n\n      search.value = ''\n    }\n    function onClickControl () {\n      if (props.hideNoData && !filteredItems.value.length) return\n\n      menu.value = true\n    }\n    function onKeydown (e: KeyboardEvent) {\n      if (['Enter', 'ArrowDown'].includes(e.key)) {\n        menu.value = true\n      }\n\n      if (['Escape'].includes(e.key)) {\n        menu.value = false\n      }\n\n      if (['Enter', 'Escape', 'Tab'].includes(e.key)) {\n        isPristine.value = true\n      }\n    }\n    function onInput (e: InputEvent) {\n      search.value = (e.target as HTMLInputElement).value\n    }\n    function onAfterLeave () {\n      if (isFocused.value) isPristine.value = true\n    }\n    const isSelecting = ref(false)\n    function select (item: any) {\n      if (props.multiple) {\n        const index = selected.value.findIndex(selection => selection === item.value)\n\n        if (index === -1) {\n          model.value = [...model.value, item]\n          search.value = ''\n        } else {\n          const value = [...model.value]\n          value.splice(index, 1)\n          model.value = value\n        }\n      } else {\n        model.value = [item]\n\n        isSelecting.value = true\n\n        search.value = item.title\n        menu.value = false\n        isPristine.value = true\n\n        nextTick(() => (isSelecting.value = false))\n      }\n    }\n\n    watch(() => vTextFieldRef.value, val => {\n      activator.value = val.$el.querySelector('.v-input__control')\n    })\n\n    watch(isFocused, val => {\n      if (val) {\n        isSelecting.value = true\n        search.value = props.multiple ? '' : String(selections.value.at(-1)?.props.title ?? '')\n        isPristine.value = true\n\n        nextTick(() => isSelecting.value = false)\n      } else {\n        menu.value = false\n        search.value = ''\n      }\n    })\n\n    watch(search, val => {\n      if (!isFocused.value || isSelecting.value) return\n\n      if (val) menu.value = true\n\n      isPristine.value = !val\n    })\n\n    useRender(() => {\n      const hasChips = !!(props.chips || slots.chip)\n\n      return (\n        <VTextField\n          ref={ vTextFieldRef }\n          modelValue={ search.value }\n          onInput={ onInput }\n          class={[\n            'v-autocomplete',\n            {\n              'v-autocomplete--active-menu': menu.value,\n              'v-autocomplete--chips': !!props.chips,\n              [`v-autocomplete--${props.multiple ? 'multiple' : 'single'}`]: true,\n            },\n          ]}\n          appendInnerIcon={ props.menuIcon }\n          dirty={ selected.value.length > 0 }\n          onClick:clear={ onClear }\n          onClick:control={ onClickControl }\n          onClick:input={ onClickControl }\n          onFocus={ () => isFocused.value = true }\n          onBlur={ () => isFocused.value = false }\n          onKeydown={ onKeydown }\n        >\n          {{\n            ...slots,\n            default: () => (\n              <>\n                { activator.value && (\n                  <VMenu\n                    v-model={ menu.value }\n                    activator={ activator.value }\n                    contentClass=\"v-autocomplete__content\"\n                    eager={ props.eager }\n                    openOnClick={ false }\n                    transition={ props.transition }\n                    onAfterLeave={ onAfterLeave }\n                  >\n                    <VList\n                      selected={ selected.value }\n                      selectStrategy={ props.multiple ? 'independent' : 'single-independent' }\n                    >\n                      { !filteredItems.value.length && !props.hideNoData && (slots['no-data']?.() ?? (\n                        <VListItem title={ t(props.noDataText) } />\n                      )) }\n\n                      { filteredItems.value.map(({ item, matches }) => (\n                        <VListItem\n                          { ...item.props }\n                          onMousedown={ (e: MouseEvent) => e.preventDefault() }\n                          onClick={ () => select(item) }\n                        >\n                          {{\n                            title: () => {\n                              return isPristine.value\n                                ? item.title\n                                : highlightResult(item.title, matches.title, search.value?.length ?? 0)\n                            },\n                          }}\n                        </VListItem>\n                      )) }\n                    </VList>\n                  </VMenu>\n                ) }\n                  { selections.value.map((selection, index) => {\n                    function onChipClose (e: Event) {\n                      e.stopPropagation()\n                      e.preventDefault()\n\n                      select(selection)\n                    }\n\n                    const slotProps = {\n                      'onClick:close': onChipClose,\n                      modelValue: true,\n                    }\n\n                    return (\n                      <div class=\"v-autocomplete__selection\">\n                        { hasChips && (\n                          <VDefaultsProvider\n                            defaults={{\n                              VChip: {\n                                closable: props.closableChips,\n                                size: 'small',\n                                text: selection.props.title,\n                              },\n                            }}\n                          >\n                            { slots.chip\n                              ? slots.chip({ props: slotProps, item: selection.originalItem })\n                              : (<VChip { ...slotProps } />)\n                            }\n                          </VDefaultsProvider>\n                        ) }\n\n                        { !hasChips && (\n                          slots.selection\n                            ? slots.selection({ item: selection.originalItem })\n                            : (\n                              <span class=\"v-autocomplete__selection-text\">\n                                { selection.props.title }\n                                { props.multiple && (index < selections.value.length - 1) && (\n                                  <span class=\"v-autocomplete__selection-comma\">,</span>\n                                ) }\n                              </span>\n                            )\n                        ) }\n                      </div>\n                    )\n                  }) }\n              </>\n            ),\n          }}\n        </VTextField>\n      )\n    })\n\n    return useForwardRef({\n      filteredItems,\n    }, vTextFieldRef)\n  },\n})\n\nexport type VAutocomplete = InstanceType<typeof VAutocomplete>\n"],"mappings":"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"}